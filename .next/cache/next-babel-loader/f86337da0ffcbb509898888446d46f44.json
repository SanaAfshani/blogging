{"ast":null,"code":"var _jsxFileName = \"/Users/macbook/Documents/blog/components/home-page/home-center-component.tsx\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport dynamic from 'next/dynamic';\nimport ReactList from 'react-list';\nimport React, { useCallback, useContext, useState } from \"react\";\nimport Modal from \"~/components/shared/modal/modal\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport axios from \"axios\";\nimport { Context } from \"~/context/context\";\nimport Form from \"~/components/home-page/form\";\nconst TweetComponent = dynamic(() => import('../shared/tweet'), {\n  ssr: false,\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('../shared/tweet')],\n    modules: ['../shared/tweet']\n  }\n});\nconst TweetBox = dynamic(() => import('./tweet-box'), {\n  ssr: false,\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('./tweet-box')],\n    modules: ['./tweet-box']\n  }\n});\n\nconst HomeCenterComponent = ({\n  childRef\n}) => {\n  const {\n    setAllPosts,\n    allPosts,\n    postCount,\n    id,\n    showModal,\n    setShowModal,\n    setData,\n    data,\n    post\n  } = useContext(Context);\n  const {\n    0: modalType,\n    1: setModalType\n  } = useState(null);\n  const handleShowModal = useCallback(type => {\n    setModalType(type);\n    setShowModal(!showModal);\n  }, [showModal]);\n  const handleCloseModal = useCallback(() => {\n    setShowModal(false);\n  }, []);\n  const deleteMutation = useMutation(async () => {\n    try {\n      const response = await axios.delete(`https://jsonplaceholder.typicode.com/posts/${id}`);\n      return response.data;\n    } catch (error) {\n      throw error;\n    }\n  }, {\n    onMutate() {// You can perform actions before the mutation starts, such as showing a loading indicator.\n      // This is a good place to update your UI to indicate that the delete operation is in progress.\n      // You can return a value that will be passed to onSettled if needed.\n    },\n\n    onSuccess(data) {\n      console.log(\"Successful deletion\", {\n        data\n      });\n      setShowModal(false);\n    },\n\n    onError(error) {\n      console.log(\"Failed to delete\", {\n        error\n      });\n      setShowModal(false);\n    },\n\n    onSettled() {\n      setAllPosts(prev => perv.filter(post => post.id !== id));\n      console.log(\"Mutation completed.\");\n      setShowModal(false);\n    }\n\n  });\n\n  async function handleSubmit() {\n    await deleteMutation.mutateAsync();\n  }\n\n  const editMutation = useMutation(async () => {\n    // eslint-disable-next-line no-useless-catch\n    try {\n      const response = await axios.patch(`https://jsonplaceholder.typicode.com/posts/${id}`, {\n        title: data.title,\n        body: data.body\n      }, {\n        headers: {\n          \"Content-type\": \"application/json; charset=UTF-8\"\n        }\n      });\n      return response.data;\n    } catch (error) {\n      throw error;\n    }\n  }, {\n    onSuccess(data) {\n      console.log(\"Successful\", {\n        data\n      });\n      setData({\n        title: \"\",\n        body: \"\"\n      });\n      setShowModal(false);\n    },\n\n    onError(error) {\n      console.log(\"Failed\", {\n        error\n      });\n      setShowModal(false);\n    },\n\n    onSettled(res) {\n      setAllPosts(prev => [res, ...prev]);\n      console.log(\"Mutation completed.\");\n      setData({\n        title: \"\",\n        body: \"\"\n      });\n      setShowModal(false);\n    }\n\n  });\n\n  async function handleEditSubmit() {\n    await editMutation.mutateAsync();\n  }\n\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 3\n    }\n  }, __jsx(\"div\", {\n    className: \"p-3 border-b border-white border-opacity-15 sticky top-0 bg-dark z-50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 4\n    }\n  }, __jsx(\"span\", {\n    className: \"text-white text-xl font-extrabold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 5\n    }\n  }, \"Home\")), __jsx(TweetBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 4\n    }\n  }), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 4\n    }\n  }, __jsx(ReactList, {\n    type: \"variable\",\n    axis: \"y\",\n    length: allPosts.length,\n    itemRenderer: (idx, key) => __jsx(TweetComponent, _extends({\n      key: key,\n      handleShowModal: handleShowModal\n    }, allPosts[idx], {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 34\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 5\n    }\n  })), postCount !== 10 && __jsx(\"div\", {\n    ref: childRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 5\n    }\n  }), showModal && __jsx(Modal, {\n    onCancel: handleCloseModal,\n    onSubmit: modalType === \"delete\" ? handleSubmit : handleEditSubmit,\n    isOpen: showModal,\n    submitButton: modalType === \"delete\" ? \"DELETE\" : \"EDIT\",\n    title: modalType === \"delete\" ? \"Do you sure delete this post?\" : \"Edit this post\",\n    children: modalType === 'edit' ? __jsx(Form, {\n      initialData: post,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 39\n      }\n    }) : null,\n    disable: data.title.length === 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 5\n    }\n  }));\n};\n\nexport default HomeCenterComponent;","map":{"version":3,"sources":["/Users/macbook/Documents/blog/components/home-page/home-center-component.tsx"],"names":["dynamic","ReactList","React","useCallback","useContext","useState","Modal","useMutation","axios","Context","Form","TweetComponent","ssr","TweetBox","HomeCenterComponent","childRef","setAllPosts","allPosts","postCount","id","showModal","setShowModal","setData","data","post","modalType","setModalType","handleShowModal","type","handleCloseModal","deleteMutation","response","delete","error","onMutate","onSuccess","console","log","onError","onSettled","prev","perv","filter","handleSubmit","mutateAsync","editMutation","patch","title","body","headers","res","handleEditSubmit","length","idx","key"],"mappings":"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","sourcesContent":["import dynamic from 'next/dynamic';\nimport ReactList from 'react-list';\nimport React, {useCallback, useContext, useState} from \"react\";\nimport Modal from \"~/components/shared/modal/modal\";\nimport {useMutation} from \"@tanstack/react-query\";\nimport axios from \"axios\";\nimport {Context} from \"~/context/context\";\nimport {ContextType} from \"~/types/static\";\nimport Form from \"~/components/home-page/form\";\nconst TweetComponent = dynamic(() => import('../shared/tweet'), { ssr: false });\nconst TweetBox = dynamic(() => import('./tweet-box'), { ssr: false });\n\ninterface HomeCenterComponentProps {\n\tchildRef: React.RefObject<HTMLDivElement>;\n}\nconst HomeCenterComponent: React.FC<HomeCenterComponentProps> = ({childRef}) => {\n\tconst { setAllPosts,allPosts,postCount,id,showModal, setShowModal,setData,data,post } = useContext(Context) as ContextType;\n\tconst [modalType, setModalType] = useState<string | null>(null);\n\n\tconst handleShowModal = useCallback((type: string) => {\n\t\tsetModalType(type);\n\t\tsetShowModal(!showModal);\n\t}, [showModal]);\n\n\n\tconst handleCloseModal = useCallback(() => {\n\t\tsetShowModal(false);\n\t}, []);\n\n\n\n\tconst deleteMutation = useMutation(\n\t\tasync () => {\n\t\t\ttry {\n\t\t\t\tconst response = await axios.delete(\n\t\t\t\t\t`https://jsonplaceholder.typicode.com/posts/${id}`\n\t\t\t\t);\n\t\t\t\treturn response.data;\n\t\t\t} catch (error) {\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tonMutate() {\n\t\t\t\t// You can perform actions before the mutation starts, such as showing a loading indicator.\n\t\t\t\t// This is a good place to update your UI to indicate that the delete operation is in progress.\n\t\t\t\t// You can return a value that will be passed to onSettled if needed.\n\t\t\t},\n\t\t\tonSuccess(data) {\n\t\t\t\tconsole.log(\"Successful deletion\", { data });\n\t\t\t\tsetShowModal(false);\n\t\t\t},\n\t\t\tonError(error) {\n\t\t\t\tconsole.log(\"Failed to delete\", { error });\n\t\t\t\tsetShowModal(false);\n\t\t\t},\n\t\t\tonSettled() {\n\t\t\t\tsetAllPosts((prev)=>perv.filter(post => post.id !== id))\n\t\t\t\tconsole.log(\"Mutation completed.\");\n\t\t\t\tsetShowModal(false);\n\t\t\t},\n\t\t}\n\t);\n\n\tasync function handleSubmit(){\n\t\tawait deleteMutation.mutateAsync();\n\t}\n\n\tconst editMutation = useMutation(\n\t\tasync () => {\n\t\t\t// eslint-disable-next-line no-useless-catch\n\t\t\ttry {\n\t\t\t\tconst response = await axios.patch(\n\t\t\t\t\t`https://jsonplaceholder.typicode.com/posts/${id}`,\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle: data.title,\n\t\t\t\t\t\tbody: data.body,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\"Content-type\": \"application/json; charset=UTF-8\",\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\treturn response.data;\n\t\t\t} catch (error) {\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tonSuccess(data) {\n\t\t\t\tconsole.log(\"Successful\", {data});\n\t\t\t\tsetData({title: \"\",\n\t\t\t\t\tbody: \"\",})\n\t\t\t\tsetShowModal(false);\n\n\t\t\t},\n\t\t\tonError(error) {\n\t\t\t\tconsole.log(\"Failed\", {error});\n\t\t\t\tsetShowModal(false);\n\n\t\t\t},\n\t\t\tonSettled(res) {\n\t\t\t\tsetAllPosts((prev)=>[res,...prev])\n\t\t\t\tconsole.log(\"Mutation completed.\");\n\t\t\t\tsetData({title: \"\",\n\t\t\t\t\tbody: \"\",})\n\t\t\t\tsetShowModal(false);\n\t\t\t},\n\t\t}\n\t);\n\n\n\tasync function handleEditSubmit(){\n\t\tawait editMutation.mutateAsync()\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<div className=\"p-3 border-b border-white border-opacity-15 sticky top-0 bg-dark z-50\">\n\t\t\t\t<span className=\"text-white text-xl font-extrabold\">Home</span>\n\t\t\t</div>\n\t\t\t<TweetBox />\n\t\t\t<div>\n\t\t\t\t<ReactList\n\t\t\t\t\ttype=\"variable\"\n\t\t\t\t\taxis=\"y\"\n\t\t\t\t\tlength={allPosts.length}\n\t\t\t\t\titemRenderer={(idx, key) => <TweetComponent key={key} handleShowModal={handleShowModal}  {...allPosts[idx]} />}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t{postCount !== 10 && (\n\t\t\t\t<div ref={childRef}></div>\n\t\t\t)}\n\t\t\t{showModal && (\n\t\t\t\t<Modal\n\t\t\t\t\tonCancel={handleCloseModal}\n\t\t\t\t\tonSubmit={modalType === \"delete\" ? handleSubmit : handleEditSubmit}\n\t\t\t\t\tisOpen={showModal}\n\t\t\t\t\tsubmitButton={modalType === \"delete\" ? \"DELETE\" : \"EDIT\"}\n\t\t\t\t\ttitle={modalType === \"delete\" ? \"Do you sure delete this post?\" : \"Edit this post\"}\n\t\t\t\t\tchildren={modalType === 'edit' ? <Form  initialData={post} /> : null}\n\t\t\t\t\tdisable={data.title.length === 0}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default HomeCenterComponent;\n"]},"metadata":{},"sourceType":"module"}