{"ast":null,"code":"var _jsxFileName = \"/Users/macbook/Documents/blog/components/home-page/home-center-component.tsx\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport dynamic from 'next/dynamic';\nimport ReactList from 'react-list';\nimport React, { useCallback, useContext, useState } from \"react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport axios from \"axios\";\nimport { Context } from \"~/context/context\";\nimport Form from \"~/components/home-page/form\";\nimport TweetComponent from \"~/components/shared/tweet\";\nimport TweetBox from \"~/components/home-page/tweet-box\";\nconst Modal = dynamic(() => import('~/components/shared/modal/modal'), {\n  ssr: false,\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak('~/components/shared/modal/modal')],\n    modules: ['~/components/shared/modal/modal']\n  }\n});\n\nconst HomeCenterComponent = ({\n  childRef\n}) => {\n  const {\n    setAllPosts,\n    allPosts,\n    postCount,\n    id,\n    showModal,\n    setShowModal,\n    setData,\n    data,\n    post\n  } = useContext(Context);\n  const {\n    0: modalType,\n    1: setModalType\n  } = useState(null);\n  const handleShowModal = useCallback(type => {\n    setModalType(type);\n    setShowModal(!showModal);\n  }, [showModal]);\n  const handleCloseModal = useCallback(() => {\n    setShowModal(false);\n  }, []);\n  const deleteMutation = useMutation(async () => {\n    try {\n      const response = await axios.delete(`https://jsonplaceholder.typicode.com/posts/${id}`);\n      return response.data;\n    } catch (error) {\n      throw error;\n    }\n  }, {\n    onMutate() {// You can perform actions before the mutation starts, such as showing a loading indicator.\n      // This is a good place to update your UI to indicate that the delete operation is in progress.\n      // You can return a value that will be passed to onSettled if needed.\n    },\n\n    onSuccess(data) {\n      console.log(\"Successful deletion\", {\n        data\n      });\n      setShowModal(false);\n    },\n\n    onError(error) {\n      console.log(\"Failed to delete\", {\n        error\n      });\n      setShowModal(false);\n    },\n\n    onSettled() {\n      setAllPosts(prev => prev.filter(post => post.id !== id));\n      console.log(\"Mutation completed.\");\n      setShowModal(false);\n    }\n\n  });\n\n  async function handleSubmit() {\n    await deleteMutation.mutateAsync();\n  }\n\n  const editMutation = useMutation(async () => {\n    // eslint-disable-next-line no-useless-catch\n    try {\n      const response = await axios.patch(`https://jsonplaceholder.typicode.com/posts/${id}`, {\n        title: data.title,\n        body: data.body\n      }, {\n        headers: {\n          \"Content-type\": \"application/json; charset=UTF-8\"\n        }\n      });\n      return response.data;\n    } catch (error) {\n      throw error;\n    }\n  }, {\n    onSuccess(data) {\n      console.log(\"Successful\", {\n        data\n      });\n      setData({\n        title: \"\",\n        body: \"\"\n      });\n      setShowModal(false);\n    },\n\n    onError(error) {\n      console.log(\"Failed\", {\n        error\n      });\n      setShowModal(false);\n    },\n\n    onSettled(res) {\n      setAllPosts(prev => {\n        const newPosts = [...prev];\n        const post = newPosts.find(post => post.id === id);\n        post.title = res.title;\n        post.body = res.body;\n        return newPosts;\n      });\n      console.log(\"Mutation completed.\");\n      setData({\n        title: \"\",\n        body: \"\"\n      });\n      setShowModal(false);\n    }\n\n  });\n\n  async function handleEditSubmit() {\n    await editMutation.mutateAsync();\n  }\n\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"p-3 border-b border-white border-opacity-15 sticky top-0 bg-dark z-50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }, __jsx(\"span\", {\n    className: \"text-white text-xl font-extrabold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  }, \"Home\")), __jsx(TweetBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 13\n    }\n  }, __jsx(ReactList, {\n    type: \"variable\",\n    axis: \"y\",\n    length: allPosts.length,\n    itemRenderer: (idx, key) => __jsx(TweetComponent, _extends({\n      key: key,\n      handleShowModal: handleShowModal\n    }, allPosts[idx], {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 49\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 17\n    }\n  })), postCount !== 10 && __jsx(\"div\", {\n    ref: childRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 17\n    }\n  }), showModal && __jsx(Modal, {\n    onCancel: handleCloseModal,\n    onSubmit: modalType === \"delete\" ? handleSubmit : handleEditSubmit,\n    isOpen: showModal,\n    submitButton: modalType === \"delete\" ? \"DELETE\" : \"EDIT\",\n    title: modalType === \"delete\" ? \"Do you sure delete this post?\" : \"Edit this post\",\n    children: modalType === 'edit' ? __jsx(Form, {\n      initialData: post,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 54\n      }\n    }) : null,\n    disable: modalType === \"delete\" ? false : data.title.length === 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 17\n    }\n  }));\n};\n\nexport default HomeCenterComponent;","map":{"version":3,"sources":["/Users/macbook/Documents/blog/components/home-page/home-center-component.tsx"],"names":["dynamic","ReactList","React","useCallback","useContext","useState","useMutation","axios","Context","Form","TweetComponent","TweetBox","Modal","ssr","HomeCenterComponent","childRef","setAllPosts","allPosts","postCount","id","showModal","setShowModal","setData","data","post","modalType","setModalType","handleShowModal","type","handleCloseModal","deleteMutation","response","delete","error","onMutate","onSuccess","console","log","onError","onSettled","prev","filter","handleSubmit","mutateAsync","editMutation","patch","title","body","headers","res","newPosts","find","handleEditSubmit","length","idx","key"],"mappings":"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","sourcesContent":["import dynamic from 'next/dynamic';\nimport ReactList from 'react-list';\nimport React, {useCallback, useContext, useState} from \"react\";\nimport {useMutation} from \"@tanstack/react-query\";\nimport axios from \"axios\";\nimport {Context} from \"~/context/context\";\nimport {ContextType} from \"~/types/static\";\nimport Form from \"~/components/home-page/form\";\nimport TweetComponent from \"~/components/shared/tweet\";\nimport TweetBox from \"~/components/home-page/tweet-box\";\n\nconst Modal = dynamic(() => import('~/components/shared/modal/modal'), {ssr: false})\n\ninterface HomeCenterComponentProps {\n    childRef: React.RefObject<HTMLDivElement>;\n}\n\nconst HomeCenterComponent: React.FC<HomeCenterComponentProps> = ({childRef}) => {\n    const {\n        setAllPosts,\n        allPosts,\n        postCount,\n        id,\n        showModal,\n        setShowModal,\n        setData,\n        data,\n        post\n    } = useContext(Context) as ContextType;\n    const [modalType, setModalType] = useState<string | null>(null);\n\n    const handleShowModal = useCallback((type: string) => {\n        setModalType(type);\n        setShowModal(!showModal);\n    }, [showModal]);\n\n\n    const handleCloseModal = useCallback(() => {\n        setShowModal(false);\n    }, []);\n\n\n    const deleteMutation = useMutation(\n        async () => {\n            try {\n                const response = await axios.delete(\n                    `https://jsonplaceholder.typicode.com/posts/${id}`\n                );\n                return response.data;\n            } catch (error) {\n                throw error;\n            }\n        },\n        {\n            onMutate() {\n                // You can perform actions before the mutation starts, such as showing a loading indicator.\n                // This is a good place to update your UI to indicate that the delete operation is in progress.\n                // You can return a value that will be passed to onSettled if needed.\n            },\n            onSuccess(data) {\n                console.log(\"Successful deletion\", {data});\n                setShowModal(false);\n            },\n            onError(error) {\n                console.log(\"Failed to delete\", {error});\n                setShowModal(false);\n            },\n            onSettled() {\n                setAllPosts((prev) => prev.filter(post => post.id !== id))\n                console.log(\"Mutation completed.\");\n                setShowModal(false);\n            },\n        }\n    );\n\n    async function handleSubmit() {\n        await deleteMutation.mutateAsync();\n    }\n\n    const editMutation = useMutation(\n        async () => {\n            // eslint-disable-next-line no-useless-catch\n            try {\n                const response = await axios.patch(\n                    `https://jsonplaceholder.typicode.com/posts/${id}`,\n                    {\n                        title: data.title,\n                        body: data.body,\n                    },\n                    {\n                        headers: {\n                            \"Content-type\": \"application/json; charset=UTF-8\",\n                        },\n                    }\n                );\n                return response.data;\n            } catch (error) {\n                throw error;\n            }\n        },\n        {\n            onSuccess(data) {\n                console.log(\"Successful\", {data});\n                setData({\n                    title: \"\",\n                    body: \"\",\n                })\n                setShowModal(false);\n\n            },\n            onError(error) {\n                console.log(\"Failed\", {error});\n                setShowModal(false);\n\n            },\n            onSettled(res) {\n                setAllPosts((prev) => {\n                   const newPosts = [...prev]\n\t\t\t\t\tconst post = newPosts.find(post => post.id === id)\n                    post.title = res.title\n                    post.body = res.body\n\t\t\t\t\treturn newPosts\n                })\n                console.log(\"Mutation completed.\");\n                setData({\n                    title: \"\",\n                    body: \"\",\n                })\n                setShowModal(false);\n            },\n        }\n    );\n\n\n    async function handleEditSubmit() {\n        await editMutation.mutateAsync()\n    }\n\n    return (\n        <div>\n            <div className=\"p-3 border-b border-white border-opacity-15 sticky top-0 bg-dark z-50\">\n                <span className=\"text-white text-xl font-extrabold\">Home</span>\n            </div>\n            <TweetBox/>\n            <div>\n                <ReactList\n                    type=\"variable\"\n                    axis=\"y\"\n                    length={allPosts.length}\n                    itemRenderer={(idx, key) => <TweetComponent key={key}\n                                                                handleShowModal={handleShowModal}  {...allPosts[idx]} />}\n                />\n            </div>\n            {postCount !== 10 && (\n                <div ref={childRef}></div>\n            )}\n            {showModal && (\n                <Modal\n                    onCancel={handleCloseModal}\n                    onSubmit={modalType === \"delete\" ? handleSubmit : handleEditSubmit}\n                    isOpen={showModal}\n                    submitButton={modalType === \"delete\" ? \"DELETE\" : \"EDIT\"}\n                    title={modalType === \"delete\" ? \"Do you sure delete this post?\" : \"Edit this post\"}\n                    children={modalType === 'edit' ? <Form initialData={post}/> : null}\n                    disable={modalType === \"delete\" ? false : data.title.length === 0}\n                />\n            )}\n        </div>\n    );\n};\n\nexport default HomeCenterComponent;\n"]},"metadata":{},"sourceType":"module"}